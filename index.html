<html>
    <body>
        <button onclick="onButtonClick()">
            Click this button
        </button>
        <script>
            function onButtonClick()
            {
                navigator.bluetooth.requestLEScan({
                    keepRepeatedDevices: true,
                    acceptAllAdvertisements: true
                })
                .then(() => {
                    navigator.bluetooth.addEventListener('advertisementreceived', event => {                        
                        //console.log(event);
                        let appData = event.manufacturerData.get(0x004C);                        
                        if (appData === undefined || appData.byteLength != 23) {
                            return;
                        }

                        let major = appData.getUint16(18, false);
                        let minor = appData.getUint16(20, false);
                        let txPowerAt1m = -appData.getInt8(22);
                        let pathLossVs1m = txPowerAt1m - event.rssi;
                        console.log('major: ' + major);
                        console.log('minor: ' + minor);
                        console.log('txPower: ' + txPowerAt1m);
                        console.log('pathLoss: ' + pathLossVs1m);
                    })
                });
            }
        </script>
    </body>
</html>
